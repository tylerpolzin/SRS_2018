
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :price %><br />
    <%= f.text_field :price %>
  </div>
  <div class="field">
    <%= hidden_field_tag "part[product_ids][]", nil %>
    <% @products.each do |product| %>
      <%= check_box_tag "part[product_ids][]", product.id, @part.product_ids.include?(product.id), id: dom_id(product) %>
      <%= label_tag dom_id(product), product.name %><br>
    <% end %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<%= bootstrap_form_for @part, url: parts_path, method: :post, :html => { :multipart => true } do |f| %>
  <%= f.fields_for(@products_parts) do |ff| %>
    <%= ff.collection_select(:product_ids, @product, :id, :product_select_with_model,
                             {:placeholder => "Select Product...", hide_label: true, :selected => @part.products.map(&:id)},
                             {:multiple => true, :class => 'newPartProductSearch', :style => "width:100%;"}) %>
  <% end %>
  <%= f.submit "Create Part", :style => "float:right;" %>
<% end %>